{"ast":null,"code":"// Fine Uploader 5.16.2 - MIT licensed. http://fineuploader.com\n(function (global) {\n  var qq = function (element) {\n    \"use strict\";\n\n    return {\n      hide: function () {\n        element.style.display = \"none\";\n        return this;\n      },\n      attach: function (type, fn) {\n        if (element.addEventListener) {\n          element.addEventListener(type, fn, false);\n        } else if (element.attachEvent) {\n          element.attachEvent(\"on\" + type, fn);\n        }\n\n        return function () {\n          qq(element).detach(type, fn);\n        };\n      },\n      detach: function (type, fn) {\n        if (element.removeEventListener) {\n          element.removeEventListener(type, fn, false);\n        } else if (element.attachEvent) {\n          element.detachEvent(\"on\" + type, fn);\n        }\n\n        return this;\n      },\n      contains: function (descendant) {\n        if (!descendant) {\n          return false;\n        }\n\n        if (element === descendant) {\n          return true;\n        }\n\n        if (element.contains) {\n          return element.contains(descendant);\n        } else {\n          return !!(descendant.compareDocumentPosition(element) & 8);\n        }\n      },\n      insertBefore: function (elementB) {\n        elementB.parentNode.insertBefore(element, elementB);\n        return this;\n      },\n      remove: function () {\n        element.parentNode.removeChild(element);\n        return this;\n      },\n      css: function (styles) {\n        if (element.style == null) {\n          throw new qq.Error(\"Can't apply style to node as it is not on the HTMLElement prototype chain!\");\n        }\n\n        if (styles.opacity != null) {\n          if (typeof element.style.opacity !== \"string\" && typeof element.filters !== \"undefined\") {\n            styles.filter = \"alpha(opacity=\" + Math.round(100 * styles.opacity) + \")\";\n          }\n        }\n\n        qq.extend(element.style, styles);\n        return this;\n      },\n      hasClass: function (name, considerParent) {\n        var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n        return re.test(element.className) || !!(considerParent && re.test(element.parentNode.className));\n      },\n      addClass: function (name) {\n        if (!qq(element).hasClass(name)) {\n          element.className += \" \" + name;\n        }\n\n        return this;\n      },\n      removeClass: function (name) {\n        var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n        element.className = element.className.replace(re, \" \").replace(/^\\s+|\\s+$/g, \"\");\n        return this;\n      },\n      getByClass: function (className, first) {\n        var candidates,\n            result = [];\n\n        if (first && element.querySelector) {\n          return element.querySelector(\".\" + className);\n        } else if (element.querySelectorAll) {\n          return element.querySelectorAll(\".\" + className);\n        }\n\n        candidates = element.getElementsByTagName(\"*\");\n        qq.each(candidates, function (idx, val) {\n          if (qq(val).hasClass(className)) {\n            result.push(val);\n          }\n        });\n        return first ? result[0] : result;\n      },\n      getFirstByClass: function (className) {\n        return qq(element).getByClass(className, true);\n      },\n      children: function () {\n        var children = [],\n            child = element.firstChild;\n\n        while (child) {\n          if (child.nodeType === 1) {\n            children.push(child);\n          }\n\n          child = child.nextSibling;\n        }\n\n        return children;\n      },\n      setText: function (text) {\n        element.innerText = text;\n        element.textContent = text;\n        return this;\n      },\n      clearText: function () {\n        return qq(element).setText(\"\");\n      },\n      hasAttribute: function (attrName) {\n        var attrVal;\n\n        if (element.hasAttribute) {\n          if (!element.hasAttribute(attrName)) {\n            return false;\n          }\n\n          return /^false$/i.exec(element.getAttribute(attrName)) == null;\n        } else {\n          attrVal = element[attrName];\n\n          if (attrVal === undefined) {\n            return false;\n          }\n\n          return /^false$/i.exec(attrVal) == null;\n        }\n      }\n    };\n  };\n\n  (function () {\n    \"use strict\";\n\n    qq.canvasToBlob = function (canvas, mime, quality) {\n      return qq.dataUriToBlob(canvas.toDataURL(mime, quality));\n    };\n\n    qq.dataUriToBlob = function (dataUri) {\n      var arrayBuffer,\n          byteString,\n          createBlob = function (data, mime) {\n        var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder,\n            blobBuilder = BlobBuilder && new BlobBuilder();\n\n        if (blobBuilder) {\n          blobBuilder.append(data);\n          return blobBuilder.getBlob(mime);\n        } else {\n          return new Blob([data], {\n            type: mime\n          });\n        }\n      },\n          intArray,\n          mimeString;\n\n      if (dataUri.split(\",\")[0].indexOf(\"base64\") >= 0) {\n        byteString = atob(dataUri.split(\",\")[1]);\n      } else {\n        byteString = decodeURI(dataUri.split(\",\")[1]);\n      }\n\n      mimeString = dataUri.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n      arrayBuffer = new ArrayBuffer(byteString.length);\n      intArray = new Uint8Array(arrayBuffer);\n      qq.each(byteString, function (idx, character) {\n        intArray[idx] = character.charCodeAt(0);\n      });\n      return createBlob(arrayBuffer, mimeString);\n    };\n\n    qq.log = function (message, level) {\n      if (window.console) {\n        if (!level || level === \"info\") {\n          window.console.log(message);\n        } else {\n          if (window.console[level]) {\n            window.console[level](message);\n          } else {\n            window.console.log(\"<\" + level + \"> \" + message);\n          }\n        }\n      }\n    };\n\n    qq.isObject = function (variable) {\n      return variable && !variable.nodeType && Object.prototype.toString.call(variable) === \"[object Object]\";\n    };\n\n    qq.isFunction = function (variable) {\n      return typeof variable === \"function\";\n    };\n\n    qq.isArray = function (value) {\n      return Object.prototype.toString.call(value) === \"[object Array]\" || value && window.ArrayBuffer && value.buffer && value.buffer.constructor === ArrayBuffer;\n    };\n\n    qq.isItemList = function (maybeItemList) {\n      return Object.prototype.toString.call(maybeItemList) === \"[object DataTransferItemList]\";\n    };\n\n    qq.isNodeList = function (maybeNodeList) {\n      return Object.prototype.toString.call(maybeNodeList) === \"[object NodeList]\" || maybeNodeList.item && maybeNodeList.namedItem;\n    };\n\n    qq.isString = function (maybeString) {\n      return Object.prototype.toString.call(maybeString) === \"[object String]\";\n    };\n\n    qq.trimStr = function (string) {\n      if (String.prototype.trim) {\n        return string.trim();\n      }\n\n      return string.replace(/^\\s+|\\s+$/g, \"\");\n    };\n\n    qq.format = function (str) {\n      var args = Array.prototype.slice.call(arguments, 1),\n          newStr = str,\n          nextIdxToReplace = newStr.indexOf(\"{}\");\n      qq.each(args, function (idx, val) {\n        var strBefore = newStr.substring(0, nextIdxToReplace),\n            strAfter = newStr.substring(nextIdxToReplace + 2);\n        newStr = strBefore + val + strAfter;\n        nextIdxToReplace = newStr.indexOf(\"{}\", nextIdxToReplace + val.length);\n\n        if (nextIdxToReplace < 0) {\n          return false;\n        }\n      });\n      return newStr;\n    };\n\n    qq.isFile = function (maybeFile) {\n      return window.File && Object.prototype.toString.call(maybeFile) === \"[object File]\";\n    };\n\n    qq.isFileList = function (maybeFileList) {\n      return window.FileList && Object.prototype.toString.call(maybeFileList) === \"[object FileList]\";\n    };\n\n    qq.isFileOrInput = function (maybeFileOrInput) {\n      return qq.isFile(maybeFileOrInput) || qq.isInput(maybeFileOrInput);\n    };\n\n    qq.isInput = function (maybeInput, notFile) {\n      var evaluateType = function (type) {\n        var normalizedType = type.toLowerCase();\n\n        if (notFile) {\n          return normalizedType !== \"file\";\n        }\n\n        return normalizedType === \"file\";\n      };\n\n      if (window.HTMLInputElement) {\n        if (Object.prototype.toString.call(maybeInput) === \"[object HTMLInputElement]\") {\n          if (maybeInput.type && evaluateType(maybeInput.type)) {\n            return true;\n          }\n        }\n      }\n\n      if (maybeInput.tagName) {\n        if (maybeInput.tagName.toLowerCase() === \"input\") {\n          if (maybeInput.type && evaluateType(maybeInput.type)) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    };\n\n    qq.isBlob = function (maybeBlob) {\n      if (window.Blob && Object.prototype.toString.call(maybeBlob) === \"[object Blob]\") {\n        return true;\n      }\n    };\n\n    qq.isXhrUploadSupported = function () {\n      var input = document.createElement(\"input\");\n      input.type = \"file\";\n      return input.multiple !== undefined && typeof File !== \"undefined\" && typeof FormData !== \"undefined\" && typeof qq.createXhrInstance().upload !== \"undefined\";\n    };\n\n    qq.createXhrInstance = function () {\n      if (window.XMLHttpRequest) {\n        return new XMLHttpRequest();\n      }\n\n      try {\n        return new ActiveXObject(\"MSXML2.XMLHTTP.3.0\");\n      } catch (error) {\n        qq.log(\"Neither XHR or ActiveX are supported!\", \"error\");\n        return null;\n      }\n    };\n\n    qq.isFolderDropSupported = function (dataTransfer) {\n      return dataTransfer.items && dataTransfer.items.length > 0 && dataTransfer.items[0].webkitGetAsEntry;\n    };\n\n    qq.isFileChunkingSupported = function () {\n      return !qq.androidStock() && qq.isXhrUploadSupported() && (File.prototype.slice !== undefined || File.prototype.webkitSlice !== undefined || File.prototype.mozSlice !== undefined);\n    };\n\n    qq.sliceBlob = function (fileOrBlob, start, end) {\n      var slicer = fileOrBlob.slice || fileOrBlob.mozSlice || fileOrBlob.webkitSlice;\n      return slicer.call(fileOrBlob, start, end);\n    };\n\n    qq.arrayBufferToHex = function (buffer) {\n      var bytesAsHex = \"\",\n          bytes = new Uint8Array(buffer);\n      qq.each(bytes, function (idx, byt) {\n        var byteAsHexStr = byt.toString(16);\n\n        if (byteAsHexStr.length < 2) {\n          byteAsHexStr = \"0\" + byteAsHexStr;\n        }\n\n        bytesAsHex += byteAsHexStr;\n      });\n      return bytesAsHex;\n    };\n\n    qq.readBlobToHex = function (blob, startOffset, length) {\n      var initialBlob = qq.sliceBlob(blob, startOffset, startOffset + length),\n          fileReader = new FileReader(),\n          promise = new qq.Promise();\n\n      fileReader.onload = function () {\n        promise.success(qq.arrayBufferToHex(fileReader.result));\n      };\n\n      fileReader.onerror = promise.failure;\n      fileReader.readAsArrayBuffer(initialBlob);\n      return promise;\n    };\n\n    qq.extend = function (first, second, extendNested) {\n      qq.each(second, function (prop, val) {\n        if (extendNested && qq.isObject(val)) {\n          if (first[prop] === undefined) {\n            first[prop] = {};\n          }\n\n          qq.extend(first[prop], val, true);\n        } else {\n          first[prop] = val;\n        }\n      });\n      return first;\n    };\n\n    qq.override = function (target, sourceFn) {\n      var super_ = {},\n          source = sourceFn(super_);\n      qq.each(source, function (srcPropName, srcPropVal) {\n        if (target[srcPropName] !== undefined) {\n          super_[srcPropName] = target[srcPropName];\n        }\n\n        target[srcPropName] = srcPropVal;\n      });\n      return target;\n    };\n\n    qq.indexOf = function (arr, elt, from) {\n      if (arr.indexOf) {\n        return arr.indexOf(elt, from);\n      }\n\n      from = from || 0;\n      var len = arr.length;\n\n      if (from < 0) {\n        from += len;\n      }\n\n      for (; from < len; from += 1) {\n        if (arr.hasOwnProperty(from) && arr[from] === elt) {\n          return from;\n        }\n      }\n\n      return -1;\n    };\n\n    qq.getUniqueId = function () {\n      return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0,\n            v = c == \"x\" ? r : r & 3 | 8;\n        return v.toString(16);\n      });\n    };\n\n    qq.ie = function () {\n      return navigator.userAgent.indexOf(\"MSIE\") !== -1 || navigator.userAgent.indexOf(\"Trident\") !== -1;\n    };\n\n    qq.ie7 = function () {\n      return navigator.userAgent.indexOf(\"MSIE 7\") !== -1;\n    };\n\n    qq.ie8 = function () {\n      return navigator.userAgent.indexOf(\"MSIE 8\") !== -1;\n    };\n\n    qq.ie10 = function () {\n      return navigator.userAgent.indexOf(\"MSIE 10\") !== -1;\n    };\n\n    qq.ie11 = function () {\n      return qq.ie() && navigator.userAgent.indexOf(\"rv:11\") !== -1;\n    };\n\n    qq.edge = function () {\n      return navigator.userAgent.indexOf(\"Edge\") >= 0;\n    };\n\n    qq.safari = function () {\n      return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Apple\") !== -1;\n    };\n\n    qq.chrome = function () {\n      return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Google\") !== -1;\n    };\n\n    qq.opera = function () {\n      return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Opera\") !== -1;\n    };\n\n    qq.firefox = function () {\n      return !qq.edge() && !qq.ie11() && navigator.userAgent.indexOf(\"Mozilla\") !== -1 && navigator.vendor !== undefined && navigator.vendor === \"\";\n    };\n\n    qq.windows = function () {\n      return navigator.platform === \"Win32\";\n    };\n\n    qq.android = function () {\n      return navigator.userAgent.toLowerCase().indexOf(\"android\") !== -1;\n    };\n\n    qq.androidStock = function () {\n      return qq.android() && navigator.userAgent.toLowerCase().indexOf(\"chrome\") < 0;\n    };\n\n    qq.ios6 = function () {\n      return qq.ios() && navigator.userAgent.indexOf(\" OS 6_\") !== -1;\n    };\n\n    qq.ios7 = function () {\n      return qq.ios() && navigator.userAgent.indexOf(\" OS 7_\") !== -1;\n    };\n\n    qq.ios8 = function () {\n      return qq.ios() && navigator.userAgent.indexOf(\" OS 8_\") !== -1;\n    };\n\n    qq.ios800 = function () {\n      return qq.ios() && navigator.userAgent.indexOf(\" OS 8_0 \") !== -1;\n    };\n\n    qq.ios = function () {\n      return navigator.userAgent.indexOf(\"iPad\") !== -1 || navigator.userAgent.indexOf(\"iPod\") !== -1 || navigator.userAgent.indexOf(\"iPhone\") !== -1;\n    };\n\n    qq.iosChrome = function () {\n      return qq.ios() && navigator.userAgent.indexOf(\"CriOS\") !== -1;\n    };\n\n    qq.iosSafari = function () {\n      return qq.ios() && !qq.iosChrome() && navigator.userAgent.indexOf(\"Safari\") !== -1;\n    };\n\n    qq.iosSafariWebView = function () {\n      return qq.ios() && !qq.iosChrome() && !qq.iosSafari();\n    };\n\n    qq.preventDefault = function (e) {\n      if (e.preventDefault) {\n        e.preventDefault();\n      } else {\n        e.returnValue = false;\n      }\n    };\n\n    qq.toElement = function () {\n      var div = document.createElement(\"div\");\n      return function (html) {\n        div.innerHTML = html;\n        var element = div.firstChild;\n        div.removeChild(element);\n        return element;\n      };\n    }();\n\n    qq.each = function (iterableItem, callback) {\n      var keyOrIndex, retVal;\n\n      if (iterableItem) {\n        if (window.Storage && iterableItem.constructor === window.Storage) {\n          for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n            retVal = callback(iterableItem.key(keyOrIndex), iterableItem.getItem(iterableItem.key(keyOrIndex)));\n\n            if (retVal === false) {\n              break;\n            }\n          }\n        } else if (qq.isArray(iterableItem) || qq.isItemList(iterableItem) || qq.isNodeList(iterableItem)) {\n          for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n            retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n\n            if (retVal === false) {\n              break;\n            }\n          }\n        } else if (qq.isString(iterableItem)) {\n          for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n            retVal = callback(keyOrIndex, iterableItem.charAt(keyOrIndex));\n\n            if (retVal === false) {\n              break;\n            }\n          }\n        } else {\n          for (keyOrIndex in iterableItem) {\n            if (Object.prototype.hasOwnProperty.call(iterableItem, keyOrIndex)) {\n              retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n\n              if (retVal === false) {\n                break;\n              }\n            }\n          }\n        }\n      }\n    };\n\n    qq.bind = function (oldFunc, context) {\n      if (qq.isFunction(oldFunc)) {\n        var args = Array.prototype.slice.call(arguments, 2);\n        return function () {\n          var newArgs = qq.extend([], args);\n\n          if (arguments.length) {\n            newArgs = newArgs.concat(Array.prototype.slice.call(arguments));\n          }\n\n          return oldFunc.apply(context, newArgs);\n        };\n      }\n\n      throw new Error(\"first parameter must be a function!\");\n    };\n\n    qq.obj2url = function (obj, temp, prefixDone) {\n      var uristrings = [],\n          prefix = \"&\",\n          add = function (nextObj, i) {\n        var nextTemp = temp ? /\\[\\]$/.test(temp) ? temp : temp + \"[\" + i + \"]\" : i;\n\n        if (nextTemp !== \"undefined\" && i !== \"undefined\") {\n          uristrings.push(typeof nextObj === \"object\" ? qq.obj2url(nextObj, nextTemp, true) : Object.prototype.toString.call(nextObj) === \"[object Function]\" ? encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj()) : encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj));\n        }\n      };\n\n      if (!prefixDone && temp) {\n        prefix = /\\?/.test(temp) ? /\\?$/.test(temp) ? \"\" : \"&\" : \"?\";\n        uristrings.push(temp);\n        uristrings.push(qq.obj2url(obj));\n      } else if (Object.prototype.toString.call(obj) === \"[object Array]\" && typeof obj !== \"undefined\") {\n        qq.each(obj, function (idx, val) {\n          add(val, idx);\n        });\n      } else if (typeof obj !== \"undefined\" && obj !== null && typeof obj === \"object\") {\n        qq.each(obj, function (prop, val) {\n          add(val, prop);\n        });\n      } else {\n        uristrings.push(encodeURIComponent(temp) + \"=\" + encodeURIComponent(obj));\n      }\n\n      if (temp) {\n        return uristrings.join(prefix);\n      } else {\n        return uristrings.join(prefix).replace(/^&/, \"\").replace(/%20/g, \"+\");\n      }\n    };\n\n    qq.obj2FormData = function (obj, formData, arrayKeyName) {\n      if (!formData) {\n        formData = new FormData();\n      }\n\n      qq.each(obj, function (key, val) {\n        key = arrayKeyName ? arrayKeyName + \"[\" + key + \"]\" : key;\n\n        if (qq.isObject(val)) {\n          qq.obj2FormData(val, formData, key);\n        } else if (qq.isFunction(val)) {\n          formData.append(key, val());\n        } else {\n          formData.append(key, val);\n        }\n      });\n      return formData;\n    };\n\n    qq.obj2Inputs = function (obj, form) {\n      var input;\n\n      if (!form) {\n        form = document.createElement(\"form\");\n      }\n\n      qq.obj2FormData(obj, {\n        append: function (key, val) {\n          input = document.createElement(\"input\");\n          input.setAttribute(\"name\", key);\n          input.setAttribute(\"value\", val);\n          form.appendChild(input);\n        }\n      });\n      return form;\n    };\n\n    qq.parseJson = function (json) {\n      if (window.JSON && qq.isFunction(JSON.parse)) {\n        return JSON.parse(json);\n      } else {\n        return eval(\"(\" + json + \")\");\n      }\n    };\n\n    qq.getExtension = function (filename) {\n      var extIdx = filename.lastIndexOf(\".\") + 1;\n\n      if (extIdx > 0) {\n        return filename.substr(extIdx, filename.length - extIdx);\n      }\n    };\n\n    qq.getFilename = function (blobOrFileInput) {\n      if (qq.isInput(blobOrFileInput)) {\n        return blobOrFileInput.value.replace(/.*(\\/|\\\\)/, \"\");\n      } else if (qq.isFile(blobOrFileInput)) {\n        if (blobOrFileInput.fileName !== null && blobOrFileInput.fileName !== undefined) {\n          return blobOrFileInput.fileName;\n        }\n      }\n\n      return blobOrFileInput.name;\n    };\n\n    qq.DisposeSupport = function () {\n      var disposers = [];\n      return {\n        dispose: function () {\n          var disposer;\n\n          do {\n            disposer = disposers.shift();\n\n            if (disposer) {\n              disposer();\n            }\n          } while (disposer);\n        },\n        attach: function () {\n          var args = arguments;\n          this.addDisposer(qq(args[0]).attach.apply(this, Array.prototype.slice.call(arguments, 1)));\n        },\n        addDisposer: function (disposeFunction) {\n          disposers.push(disposeFunction);\n        }\n      };\n    };\n  })();\n\n  (function () {\n    \"use strict\";\n\n    if (typeof define === \"function\" && define.amd) {\n      define(function () {\n        return qq;\n      });\n    } else if (typeof module !== \"undefined\" && module.exports) {\n      module.exports = qq;\n    } else {\n      global.qq = qq;\n    }\n  })();\n\n  qq.version = \"5.16.2\";\n\n  qq.supportedFeatures = function () {\n    \"use strict\";\n\n    var supportsUploading, supportsUploadingBlobs, supportsFileDrop, supportsAjaxFileUploading, supportsFolderDrop, supportsChunking, supportsResume, supportsUploadViaPaste, supportsUploadCors, supportsDeleteFileXdr, supportsDeleteFileCorsXhr, supportsDeleteFileCors, supportsFolderSelection, supportsImagePreviews, supportsUploadProgress;\n\n    function testSupportsFileInputElement() {\n      var supported = true,\n          tempInput;\n\n      try {\n        tempInput = document.createElement(\"input\");\n        tempInput.type = \"file\";\n        qq(tempInput).hide();\n\n        if (tempInput.disabled) {\n          supported = false;\n        }\n      } catch (ex) {\n        supported = false;\n      }\n\n      return supported;\n    }\n\n    function isChrome14OrHigher() {\n      return (qq.chrome() || qq.opera()) && navigator.userAgent.match(/Chrome\\/[1][4-9]|Chrome\\/[2-9][0-9]/) !== undefined;\n    }\n\n    function isCrossOriginXhrSupported() {\n      if (window.XMLHttpRequest) {\n        var xhr = qq.createXhrInstance();\n        return xhr.withCredentials !== undefined;\n      }\n\n      return false;\n    }\n\n    function isXdrSupported() {\n      return window.XDomainRequest !== undefined;\n    }\n\n    function isCrossOriginAjaxSupported() {\n      if (isCrossOriginXhrSupported()) {\n        return true;\n      }\n\n      return isXdrSupported();\n    }\n\n    function isFolderSelectionSupported() {\n      return document.createElement(\"input\").webkitdirectory !== undefined;\n    }\n\n    function isLocalStorageSupported() {\n      try {\n        return !!window.localStorage && qq.isFunction(window.localStorage.setItem);\n      } catch (error) {\n        return false;\n      }\n    }\n\n    function isDragAndDropSupported() {\n      var span = document.createElement(\"span\");\n      return (\"draggable\" in span || \"ondragstart\" in span && \"ondrop\" in span) && !qq.android() && !qq.ios();\n    }\n\n    supportsUploading = testSupportsFileInputElement();\n    supportsAjaxFileUploading = supportsUploading && qq.isXhrUploadSupported();\n    supportsUploadingBlobs = supportsAjaxFileUploading && !qq.androidStock();\n    supportsFileDrop = supportsAjaxFileUploading && isDragAndDropSupported();\n\n    supportsFolderDrop = supportsFileDrop && function () {\n      var input = document.createElement(\"input\");\n      input.type = \"file\";\n      return !!(\"webkitdirectory\" in (input || document.querySelectorAll(\"input[type=file]\")[0]));\n    }();\n\n    supportsChunking = supportsAjaxFileUploading && qq.isFileChunkingSupported();\n    supportsResume = supportsAjaxFileUploading && supportsChunking && isLocalStorageSupported();\n    supportsUploadViaPaste = supportsAjaxFileUploading && isChrome14OrHigher();\n    supportsUploadCors = supportsUploading && (window.postMessage !== undefined || supportsAjaxFileUploading);\n    supportsDeleteFileCorsXhr = isCrossOriginXhrSupported();\n    supportsDeleteFileXdr = isXdrSupported();\n    supportsDeleteFileCors = isCrossOriginAjaxSupported();\n    supportsFolderSelection = isFolderSelectionSupported();\n    supportsImagePreviews = supportsAjaxFileUploading && window.FileReader !== undefined;\n\n    supportsUploadProgress = function () {\n      if (supportsAjaxFileUploading) {\n        return !qq.androidStock() && !qq.iosChrome();\n      }\n\n      return false;\n    }();\n\n    return {\n      ajaxUploading: supportsAjaxFileUploading,\n      blobUploading: supportsUploadingBlobs,\n      canDetermineSize: supportsAjaxFileUploading,\n      chunking: supportsChunking,\n      deleteFileCors: supportsDeleteFileCors,\n      deleteFileCorsXdr: supportsDeleteFileXdr,\n      deleteFileCorsXhr: supportsDeleteFileCorsXhr,\n      dialogElement: !!window.HTMLDialogElement,\n      fileDrop: supportsFileDrop,\n      folderDrop: supportsFolderDrop,\n      folderSelection: supportsFolderSelection,\n      imagePreviews: supportsImagePreviews,\n      imageValidation: supportsImagePreviews,\n      itemSizeValidation: supportsAjaxFileUploading,\n      pause: supportsChunking,\n      progressBar: supportsUploadProgress,\n      resume: supportsResume,\n      scaling: supportsImagePreviews && supportsUploadingBlobs,\n      tiffPreviews: qq.safari(),\n      unlimitedScaledImageSize: !qq.ios(),\n      uploading: supportsUploading,\n      uploadCors: supportsUploadCors,\n      uploadCustomHeaders: supportsAjaxFileUploading,\n      uploadNonMultipart: supportsAjaxFileUploading,\n      uploadViaPaste: supportsUploadViaPaste\n    };\n  }();\n\n  qq.isGenericPromise = function (maybePromise) {\n    \"use strict\";\n\n    return !!(maybePromise && maybePromise.then && qq.isFunction(maybePromise.then));\n  };\n\n  qq.Promise = function () {\n    \"use strict\";\n\n    var successArgs,\n        failureArgs,\n        successCallbacks = [],\n        failureCallbacks = [],\n        doneCallbacks = [],\n        state = 0;\n    qq.extend(this, {\n      then: function (onSuccess, onFailure) {\n        if (state === 0) {\n          if (onSuccess) {\n            successCallbacks.push(onSuccess);\n          }\n\n          if (onFailure) {\n            failureCallbacks.push(onFailure);\n          }\n        } else if (state === -1) {\n          onFailure && onFailure.apply(null, failureArgs);\n        } else if (onSuccess) {\n          onSuccess.apply(null, successArgs);\n        }\n\n        return this;\n      },\n      done: function (callback) {\n        if (state === 0) {\n          doneCallbacks.push(callback);\n        } else {\n          callback.apply(null, failureArgs === undefined ? successArgs : failureArgs);\n        }\n\n        return this;\n      },\n      success: function () {\n        state = 1;\n        successArgs = arguments;\n\n        if (successCallbacks.length) {\n          qq.each(successCallbacks, function (idx, callback) {\n            callback.apply(null, successArgs);\n          });\n        }\n\n        if (doneCallbacks.length) {\n          qq.each(doneCallbacks, function (idx, callback) {\n            callback.apply(null, successArgs);\n          });\n        }\n\n        return this;\n      },\n      failure: function () {\n        state = -1;\n        failureArgs = arguments;\n\n        if (failureCallbacks.length) {\n          qq.each(failureCallbacks, function (idx, callback) {\n            callback.apply(null, failureArgs);\n          });\n        }\n\n        if (doneCallbacks.length) {\n          qq.each(doneCallbacks, function (idx, callback) {\n            callback.apply(null, failureArgs);\n          });\n        }\n\n        return this;\n      }\n    });\n  };\n\n  qq.DragAndDrop = function (o) {\n    \"use strict\";\n\n    var options,\n        HIDE_ZONES_EVENT_NAME = \"qq-hidezones\",\n        HIDE_BEFORE_ENTER_ATTR = \"qq-hide-dropzone\",\n        uploadDropZones = [],\n        droppedFiles = [],\n        disposeSupport = new qq.DisposeSupport();\n    options = {\n      dropZoneElements: [],\n      allowMultipleItems: true,\n      classes: {\n        dropActive: null\n      },\n      callbacks: new qq.DragAndDrop.callbacks()\n    };\n    qq.extend(options, o, true);\n\n    function uploadDroppedFiles(files, uploadDropZone) {\n      var filesAsArray = Array.prototype.slice.call(files);\n      options.callbacks.dropLog(\"Grabbed \" + files.length + \" dropped files.\");\n      uploadDropZone.dropDisabled(false);\n      options.callbacks.processingDroppedFilesComplete(filesAsArray, uploadDropZone.getElement());\n    }\n\n    function traverseFileTree(entry) {\n      var parseEntryPromise = new qq.Promise();\n\n      if (entry.isFile) {\n        entry.file(function (file) {\n          file.qqPath = extractDirectoryPath(entry);\n          droppedFiles.push(file);\n          parseEntryPromise.success();\n        }, function (fileError) {\n          options.callbacks.dropLog(\"Problem parsing '\" + entry.fullPath + \"'.  FileError code \" + fileError.code + \".\", \"error\");\n          parseEntryPromise.failure();\n        });\n      } else if (entry.isDirectory) {\n        getFilesInDirectory(entry).then(function allEntriesRead(entries) {\n          var entriesLeft = entries.length;\n          qq.each(entries, function (idx, entry) {\n            traverseFileTree(entry).done(function () {\n              entriesLeft -= 1;\n\n              if (entriesLeft === 0) {\n                parseEntryPromise.success();\n              }\n            });\n          });\n\n          if (!entries.length) {\n            parseEntryPromise.success();\n          }\n        }, function readFailure(fileError) {\n          options.callbacks.dropLog(\"Problem parsing '\" + entry.fullPath + \"'.  FileError code \" + fileError.code + \".\", \"error\");\n          parseEntryPromise.failure();\n        });\n      }\n\n      return parseEntryPromise;\n    }\n\n    function extractDirectoryPath(entry) {\n      var name = entry.name,\n          fullPath = entry.fullPath,\n          indexOfNameInFullPath = fullPath.lastIndexOf(name);\n      fullPath = fullPath.substr(0, indexOfNameInFullPath);\n\n      if (fullPath.charAt(0) === \"/\") {\n        fullPath = fullPath.substr(1);\n      }\n\n      return fullPath;\n    }\n\n    function getFilesInDirectory(entry, reader, accumEntries, existingPromise) {\n      var promise = existingPromise || new qq.Promise(),\n          dirReader = reader || entry.createReader();\n      dirReader.readEntries(function readSuccess(entries) {\n        var newEntries = accumEntries ? accumEntries.concat(entries) : entries;\n\n        if (entries.length) {\n          setTimeout(function () {\n            getFilesInDirectory(entry, dirReader, newEntries, promise);\n          }, 0);\n        } else {\n          promise.success(newEntries);\n        }\n      }, promise.failure);\n      return promise;\n    }\n\n    function handleDataTransfer(dataTransfer, uploadDropZone) {\n      var pendingFolderPromises = [],\n          handleDataTransferPromise = new qq.Promise();\n      options.callbacks.processingDroppedFiles();\n      uploadDropZone.dropDisabled(true);\n\n      if (dataTransfer.files.length > 1 && !options.allowMultipleItems) {\n        options.callbacks.processingDroppedFilesComplete([]);\n        options.callbacks.dropError(\"tooManyFilesError\", \"\");\n        uploadDropZone.dropDisabled(false);\n        handleDataTransferPromise.failure();\n      } else {\n        droppedFiles = [];\n\n        if (qq.isFolderDropSupported(dataTransfer)) {\n          qq.each(dataTransfer.items, function (idx, item) {\n            var entry = item.webkitGetAsEntry();\n\n            if (entry) {\n              if (entry.isFile) {\n                droppedFiles.push(item.getAsFile());\n              } else {\n                pendingFolderPromises.push(traverseFileTree(entry).done(function () {\n                  pendingFolderPromises.pop();\n\n                  if (pendingFolderPromises.length === 0) {\n                    handleDataTransferPromise.success();\n                  }\n                }));\n              }\n            }\n          });\n        } else {\n          droppedFiles = dataTransfer.files;\n        }\n\n        if (pendingFolderPromises.length === 0) {\n          handleDataTransferPromise.success();\n        }\n      }\n\n      return handleDataTransferPromise;\n    }\n\n    function setupDropzone(dropArea) {\n      var dropZone = new qq.UploadDropZone({\n        HIDE_ZONES_EVENT_NAME: HIDE_ZONES_EVENT_NAME,\n        element: dropArea,\n        onEnter: function (e) {\n          qq(dropArea).addClass(options.classes.dropActive);\n          e.stopPropagation();\n        },\n        onLeaveNotDescendants: function (e) {\n          qq(dropArea).removeClass(options.classes.dropActive);\n        },\n        onDrop: function (e) {\n          handleDataTransfer(e.dataTransfer, dropZone).then(function () {\n            uploadDroppedFiles(droppedFiles, dropZone);\n          }, function () {\n            options.callbacks.dropLog(\"Drop event DataTransfer parsing failed.  No files will be uploaded.\", \"error\");\n          });\n        }\n      });\n      disposeSupport.addDisposer(function () {\n        dropZone.dispose();\n      });\n      qq(dropArea).hasAttribute(HIDE_BEFORE_ENTER_ATTR) && qq(dropArea).hide();\n      uploadDropZones.push(dropZone);\n      return dropZone;\n    }\n\n    function isFileDrag(dragEvent) {\n      var fileDrag;\n      qq.each(dragEvent.dataTransfer.types, function (key, val) {\n        if (val === \"Files\") {\n          fileDrag = true;\n          return false;\n        }\n      });\n      return fileDrag;\n    }\n\n    function leavingDocumentOut(e) {\n      if (qq.safari()) {\n        return e.x < 0 || e.y < 0;\n      }\n\n      return e.x === 0 && e.y === 0;\n    }\n\n    function setupDragDrop() {\n      var dropZones = options.dropZoneElements,\n          maybeHideDropZones = function () {\n        setTimeout(function () {\n          qq.each(dropZones, function (idx, dropZone) {\n            qq(dropZone).hasAttribute(HIDE_BEFORE_ENTER_ATTR) && qq(dropZone).hide();\n            qq(dropZone).removeClass(options.classes.dropActive);\n          });\n        }, 10);\n      };\n\n      qq.each(dropZones, function (idx, dropZone) {\n        var uploadDropZone = setupDropzone(dropZone);\n\n        if (dropZones.length && qq.supportedFeatures.fileDrop) {\n          disposeSupport.attach(document, \"dragenter\", function (e) {\n            if (!uploadDropZone.dropDisabled() && isFileDrag(e)) {\n              qq.each(dropZones, function (idx, dropZone) {\n                if (dropZone instanceof HTMLElement && qq(dropZone).hasAttribute(HIDE_BEFORE_ENTER_ATTR)) {\n                  qq(dropZone).css({\n                    display: \"block\"\n                  });\n                }\n              });\n            }\n          });\n        }\n      });\n      disposeSupport.attach(document, \"dragleave\", function (e) {\n        if (leavingDocumentOut(e)) {\n          maybeHideDropZones();\n        }\n      });\n      disposeSupport.attach(qq(document).children()[0], \"mouseenter\", function (e) {\n        maybeHideDropZones();\n      });\n      disposeSupport.attach(document, \"drop\", function (e) {\n        if (isFileDrag(e)) {\n          e.preventDefault();\n          maybeHideDropZones();\n        }\n      });\n      disposeSupport.attach(document, HIDE_ZONES_EVENT_NAME, maybeHideDropZones);\n    }\n\n    setupDragDrop();\n    qq.extend(this, {\n      setupExtraDropzone: function (element) {\n        options.dropZoneElements.push(element);\n        setupDropzone(element);\n      },\n      removeDropzone: function (element) {\n        var i,\n            dzs = options.dropZoneElements;\n\n        for (i in dzs) {\n          if (dzs[i] === element) {\n            return dzs.splice(i, 1);\n          }\n        }\n      },\n      dispose: function () {\n        disposeSupport.dispose();\n        qq.each(uploadDropZones, function (idx, dropZone) {\n          dropZone.dispose();\n        });\n      }\n    });\n    this._testing = {};\n    this._testing.extractDirectoryPath = extractDirectoryPath;\n  };\n\n  qq.DragAndDrop.callbacks = function () {\n    \"use strict\";\n\n    return {\n      processingDroppedFiles: function () {},\n      processingDroppedFilesComplete: function (files, targetEl) {},\n      dropError: function (code, errorSpecifics) {\n        qq.log(\"Drag & drop error code '\" + code + \" with these specifics: '\" + errorSpecifics + \"'\", \"error\");\n      },\n      dropLog: function (message, level) {\n        qq.log(message, level);\n      }\n    };\n  };\n\n  qq.UploadDropZone = function (o) {\n    \"use strict\";\n\n    var disposeSupport = new qq.DisposeSupport(),\n        options,\n        element,\n        preventDrop,\n        dropOutsideDisabled;\n    options = {\n      element: null,\n      onEnter: function (e) {},\n      onLeave: function (e) {},\n      onLeaveNotDescendants: function (e) {},\n      onDrop: function (e) {}\n    };\n    qq.extend(options, o);\n    element = options.element;\n\n    function dragoverShouldBeCanceled() {\n      return qq.safari() || qq.firefox() && qq.windows();\n    }\n\n    function disableDropOutside(e) {\n      if (!dropOutsideDisabled) {\n        if (dragoverShouldBeCanceled) {\n          disposeSupport.attach(document, \"dragover\", function (e) {\n            e.preventDefault();\n          });\n        } else {\n          disposeSupport.attach(document, \"dragover\", function (e) {\n            if (e.dataTransfer) {\n              e.dataTransfer.dropEffect = \"none\";\n              e.preventDefault();\n            }\n          });\n        }\n\n        dropOutsideDisabled = true;\n      }\n    }\n\n    function isValidFileDrag(e) {\n      if (!qq.supportedFeatures.fileDrop) {\n        return false;\n      }\n\n      var effectTest,\n          dt = e.dataTransfer,\n          isSafari = qq.safari();\n      effectTest = qq.ie() && qq.supportedFeatures.fileDrop ? true : dt.effectAllowed !== \"none\";\n      return dt && effectTest && (dt.files && dt.files.length || !isSafari && dt.types.contains && dt.types.contains(\"Files\") || dt.types.includes && dt.types.includes(\"Files\"));\n    }\n\n    function isOrSetDropDisabled(isDisabled) {\n      if (isDisabled !== undefined) {\n        preventDrop = isDisabled;\n      }\n\n      return preventDrop;\n    }\n\n    function triggerHidezonesEvent() {\n      var hideZonesEvent;\n\n      function triggerUsingOldApi() {\n        hideZonesEvent = document.createEvent(\"Event\");\n        hideZonesEvent.initEvent(options.HIDE_ZONES_EVENT_NAME, true, true);\n      }\n\n      if (window.CustomEvent) {\n        try {\n          hideZonesEvent = new CustomEvent(options.HIDE_ZONES_EVENT_NAME);\n        } catch (err) {\n          triggerUsingOldApi();\n        }\n      } else {\n        triggerUsingOldApi();\n      }\n\n      document.dispatchEvent(hideZonesEvent);\n    }\n\n    function attachEvents() {\n      disposeSupport.attach(element, \"dragover\", function (e) {\n        if (!isValidFileDrag(e)) {\n          return;\n        }\n\n        var effect = qq.ie() && qq.supportedFeatures.fileDrop ? null : e.dataTransfer.effectAllowed;\n\n        if (effect === \"move\" || effect === \"linkMove\") {\n          e.dataTransfer.dropEffect = \"move\";\n        } else {\n          e.dataTransfer.dropEffect = \"copy\";\n        }\n\n        e.stopPropagation();\n        e.preventDefault();\n      });\n      disposeSupport.attach(element, \"dragenter\", function (e) {\n        if (!isOrSetDropDisabled()) {\n          if (!isValidFileDrag(e)) {\n            return;\n          }\n\n          options.onEnter(e);\n        }\n      });\n      disposeSupport.attach(element, \"dragleave\", function (e) {\n        if (!isValidFileDrag(e)) {\n          return;\n        }\n\n        options.onLeave(e);\n        var relatedTarget = document.elementFromPoint(e.clientX, e.clientY);\n\n        if (qq(this).contains(relatedTarget)) {\n          return;\n        }\n\n        options.onLeaveNotDescendants(e);\n      });\n      disposeSupport.attach(element, \"drop\", function (e) {\n        if (!isOrSetDropDisabled()) {\n          if (!isValidFileDrag(e)) {\n            return;\n          }\n\n          e.preventDefault();\n          e.stopPropagation();\n          options.onDrop(e);\n          triggerHidezonesEvent();\n        }\n      });\n    }\n\n    disableDropOutside();\n    attachEvents();\n    qq.extend(this, {\n      dropDisabled: function (isDisabled) {\n        return isOrSetDropDisabled(isDisabled);\n      },\n      dispose: function () {\n        disposeSupport.dispose();\n      },\n      getElement: function () {\n        return element;\n      }\n    });\n    this._testing = {};\n    this._testing.isValidFileDrag = isValidFileDrag;\n  };\n})(window);","map":{"version":3,"sources":["?","../client/js/util.js","../client/js/export.js","../client/js/version.js","../client/js/features.js","../client/js/promise.js","../client/js/dnd.js"],"names":["global","window","qq","element","hide","style","display","this","attach","type","fn","addEventListener","attachEvent","detach","removeEventListener","detachEvent","contains","descendant","compareDocumentPosition","insertBefore","elementB","parentNode","remove","removeChild","css","styles","Error","opacity","filter","Math","round","extend","hasClass","name","considerParent","re","RegExp","test","className","addClass","removeClass","replace","getByClass","first","candidates","result","querySelector","querySelectorAll","getElementsByTagName","each","idx","val","push","getFirstByClass","children","child","firstChild","nodeType","nextSibling","setText","text","innerText","textContent","clearText","hasAttribute","attrName","attrVal","exec","getAttribute","undefined","canvasToBlob","canvas","mime","quality","dataUriToBlob","toDataURL","dataUri","arrayBuffer","byteString","createBlob","data","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","blobBuilder","append","getBlob","Blob","intArray","mimeString","split","indexOf","atob","decodeURI","ArrayBuffer","length","Uint8Array","character","charCodeAt","log","message","level","console","isObject","variable","Object","prototype","toString","call","isFunction","isArray","value","buffer","constructor","isItemList","maybeItemList","isNodeList","maybeNodeList","item","namedItem","isString","maybeString","trimStr","string","String","trim","format","str","args","Array","slice","arguments","newStr","nextIdxToReplace","strBefore","substring","strAfter","isFile","maybeFile","File","isFileList","maybeFileList","FileList","isFileOrInput","maybeFileOrInput","isInput","maybeInput","notFile","evaluateType","normalizedType","toLowerCase","HTMLInputElement","tagName","isBlob","maybeBlob","isXhrUploadSupported","input","document","createElement","multiple","FormData","createXhrInstance","upload","XMLHttpRequest","ActiveXObject","error","isFolderDropSupported","dataTransfer","items","webkitGetAsEntry","isFileChunkingSupported","androidStock","webkitSlice","mozSlice","sliceBlob","fileOrBlob","start","end","slicer","arrayBufferToHex","bytesAsHex","bytes","byt","byteAsHexStr","readBlobToHex","blob","startOffset","initialBlob","fileReader","FileReader","promise","Promise","onload","success","onerror","failure","readAsArrayBuffer","second","extendNested","prop","override","target","sourceFn","super_","source","srcPropName","srcPropVal","arr","elt","from","len","hasOwnProperty","getUniqueId","c","r","random","v","ie","navigator","userAgent","ie7","ie8","ie10","ie11","edge","safari","vendor","chrome","opera","firefox","windows","platform","android","ios6","ios","ios7","ios8","ios800","iosChrome","iosSafari","iosSafariWebView","preventDefault","e","returnValue","toElement","div","html","innerHTML","iterableItem","callback","keyOrIndex","retVal","Storage","key","getItem","charAt","bind","oldFunc","context","newArgs","concat","apply","obj2url","obj","temp","prefixDone","uristrings","prefix","add","nextObj","i","nextTemp","encodeURIComponent","join","obj2FormData","formData","arrayKeyName","obj2Inputs","form","setAttribute","appendChild","parseJson","json","JSON","parse","eval","getExtension","filename","extIdx","lastIndexOf","substr","getFilename","blobOrFileInput","fileName","DisposeSupport","disposers","dispose","disposer","shift","addDisposer","disposeFunction","define","amd","module","exports","version","supportedFeatures","supportsUploading","supportsUploadingBlobs","supportsFileDrop","supportsAjaxFileUploading","supportsFolderDrop","supportsChunking","supportsResume","supportsUploadViaPaste","supportsUploadCors","supportsDeleteFileXdr","supportsDeleteFileCorsXhr","supportsDeleteFileCors","supportsFolderSelection","supportsImagePreviews","supportsUploadProgress","testSupportsFileInputElement","supported","tempInput","disabled","ex","isChrome14OrHigher","match","isCrossOriginXhrSupported","xhr","withCredentials","isXdrSupported","XDomainRequest","isCrossOriginAjaxSupported","isFolderSelectionSupported","webkitdirectory","isLocalStorageSupported","localStorage","setItem","isDragAndDropSupported","span","postMessage","ajaxUploading","blobUploading","canDetermineSize","chunking","deleteFileCors","deleteFileCorsXdr","deleteFileCorsXhr","dialogElement","HTMLDialogElement","fileDrop","folderDrop","folderSelection","imagePreviews","imageValidation","itemSizeValidation","pause","progressBar","resume","scaling","tiffPreviews","unlimitedScaledImageSize","uploading","uploadCors","uploadCustomHeaders","uploadNonMultipart","uploadViaPaste","isGenericPromise","maybePromise","then","successArgs","failureArgs","successCallbacks","failureCallbacks","doneCallbacks","state","onSuccess","onFailure","done","DragAndDrop","o","options","HIDE_ZONES_EVENT_NAME","HIDE_BEFORE_ENTER_ATTR","uploadDropZones","droppedFiles","disposeSupport","dropZoneElements","allowMultipleItems","classes","dropActive","callbacks","uploadDroppedFiles","files","uploadDropZone","filesAsArray","dropLog","dropDisabled","processingDroppedFilesComplete","getElement","traverseFileTree","entry","parseEntryPromise","file","qqPath","extractDirectoryPath","fileError","fullPath","code","isDirectory","getFilesInDirectory","allEntriesRead","entries","entriesLeft","readFailure","indexOfNameInFullPath","reader","accumEntries","existingPromise","dirReader","createReader","readEntries","readSuccess","newEntries","setTimeout","handleDataTransfer","pendingFolderPromises","handleDataTransferPromise","processingDroppedFiles","dropError","getAsFile","pop","setupDropzone","dropArea","dropZone","UploadDropZone","onEnter","stopPropagation","onLeaveNotDescendants","onDrop","isFileDrag","dragEvent","fileDrag","types","leavingDocumentOut","x","y","setupDragDrop","dropZones","maybeHideDropZones","HTMLElement","setupExtraDropzone","removeDropzone","dzs","splice","_testing","targetEl","errorSpecifics","preventDrop","dropOutsideDisabled","onLeave","dragoverShouldBeCanceled","disableDropOutside","dropEffect","isValidFileDrag","effectTest","dt","isSafari","effectAllowed","includes","isOrSetDropDisabled","isDisabled","triggerHidezonesEvent","hideZonesEvent","triggerUsingOldApi","createEvent","initEvent","CustomEvent","err","dispatchEvent","attachEvents","effect","relatedTarget","elementFromPoint","clientX","clientY"],"mappings":"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","sourcesContent":[null,"/*globals window, navigator, document, FormData, File, HTMLInputElement, XMLHttpRequest, Blob, Storage, ActiveXObject */\n/* jshint -W079 */\nvar qq = function(element) {\n    \"use strict\";\n\n    return {\n        hide: function() {\n            element.style.display = \"none\";\n            return this;\n        },\n\n        /** Returns the function which detaches attached event */\n        attach: function(type, fn) {\n            if (element.addEventListener) {\n                element.addEventListener(type, fn, false);\n            } else if (element.attachEvent) {\n                element.attachEvent(\"on\" + type, fn);\n            }\n            return function() {\n                qq(element).detach(type, fn);\n            };\n        },\n\n        detach: function(type, fn) {\n            if (element.removeEventListener) {\n                element.removeEventListener(type, fn, false);\n            } else if (element.attachEvent) {\n                element.detachEvent(\"on\" + type, fn);\n            }\n            return this;\n        },\n\n        contains: function(descendant) {\n            // The [W3C spec](http://www.w3.org/TR/domcore/#dom-node-contains)\n            // says a `null` (or ostensibly `undefined`) parameter\n            // passed into `Node.contains` should result in a false return value.\n            // IE7 throws an exception if the parameter is `undefined` though.\n            if (!descendant) {\n                return false;\n            }\n\n            // compareposition returns false in this case\n            if (element === descendant) {\n                return true;\n            }\n\n            if (element.contains) {\n                return element.contains(descendant);\n            } else {\n                /*jslint bitwise: true*/\n                return !!(descendant.compareDocumentPosition(element) & 8);\n            }\n        },\n\n        /**\n         * Insert this element before elementB.\n         */\n        insertBefore: function(elementB) {\n            elementB.parentNode.insertBefore(element, elementB);\n            return this;\n        },\n\n        remove: function() {\n            element.parentNode.removeChild(element);\n            return this;\n        },\n\n        /**\n         * Sets styles for an element.\n         * Fixes opacity in IE6-8.\n         */\n        css: function(styles) {\n            /*jshint eqnull: true*/\n            if (element.style == null) {\n                throw new qq.Error(\"Can't apply style to node as it is not on the HTMLElement prototype chain!\");\n            }\n\n            /*jshint -W116*/\n            if (styles.opacity != null) {\n                if (typeof element.style.opacity !== \"string\" && typeof (element.filters) !== \"undefined\") {\n                    styles.filter = \"alpha(opacity=\" + Math.round(100 * styles.opacity) + \")\";\n                }\n            }\n            qq.extend(element.style, styles);\n\n            return this;\n        },\n\n        hasClass: function(name, considerParent) {\n            var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n            return re.test(element.className) || !!(considerParent && re.test(element.parentNode.className));\n        },\n\n        addClass: function(name) {\n            if (!qq(element).hasClass(name)) {\n                element.className += \" \" + name;\n            }\n            return this;\n        },\n\n        removeClass: function(name) {\n            var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n            element.className = element.className.replace(re, \" \").replace(/^\\s+|\\s+$/g, \"\");\n            return this;\n        },\n\n        getByClass: function(className, first) {\n            var candidates,\n                result = [];\n\n            if (first && element.querySelector) {\n                return element.querySelector(\".\" + className);\n            }\n            else if (element.querySelectorAll) {\n                return element.querySelectorAll(\".\" + className);\n            }\n\n            candidates = element.getElementsByTagName(\"*\");\n\n            qq.each(candidates, function(idx, val) {\n                if (qq(val).hasClass(className)) {\n                    result.push(val);\n                }\n            });\n            return first ? result[0] : result;\n        },\n\n        getFirstByClass: function(className) {\n            return qq(element).getByClass(className, true);\n        },\n\n        children: function() {\n            var children = [],\n                child = element.firstChild;\n\n            while (child) {\n                if (child.nodeType === 1) {\n                    children.push(child);\n                }\n                child = child.nextSibling;\n            }\n\n            return children;\n        },\n\n        setText: function(text) {\n            element.innerText = text;\n            element.textContent = text;\n            return this;\n        },\n\n        clearText: function() {\n            return qq(element).setText(\"\");\n        },\n\n        // Returns true if the attribute exists on the element\n        // AND the value of the attribute is NOT \"false\" (case-insensitive)\n        hasAttribute: function(attrName) {\n            var attrVal;\n\n            if (element.hasAttribute) {\n\n                if (!element.hasAttribute(attrName)) {\n                    return false;\n                }\n\n                /*jshint -W116*/\n                return (/^false$/i).exec(element.getAttribute(attrName)) == null;\n            }\n            else {\n                attrVal = element[attrName];\n\n                if (attrVal === undefined) {\n                    return false;\n                }\n\n                /*jshint -W116*/\n                return (/^false$/i).exec(attrVal) == null;\n            }\n        }\n    };\n};\n\n(function() {\n    \"use strict\";\n\n    qq.canvasToBlob = function(canvas, mime, quality) {\n        return qq.dataUriToBlob(canvas.toDataURL(mime, quality));\n    };\n\n    qq.dataUriToBlob = function(dataUri) {\n        var arrayBuffer, byteString,\n            createBlob = function(data, mime) {\n                var BlobBuilder = window.BlobBuilder ||\n                        window.WebKitBlobBuilder ||\n                        window.MozBlobBuilder ||\n                        window.MSBlobBuilder,\n                    blobBuilder = BlobBuilder && new BlobBuilder();\n\n                if (blobBuilder) {\n                    blobBuilder.append(data);\n                    return blobBuilder.getBlob(mime);\n                }\n                else {\n                    return new Blob([data], {type: mime});\n                }\n            },\n            intArray, mimeString;\n\n        // convert base64 to raw binary data held in a string\n        if (dataUri.split(\",\")[0].indexOf(\"base64\") >= 0) {\n            byteString = atob(dataUri.split(\",\")[1]);\n        }\n        else {\n            byteString = decodeURI(dataUri.split(\",\")[1]);\n        }\n\n        // extract the MIME\n        mimeString = dataUri.split(\",\")[0]\n            .split(\":\")[1]\n            .split(\";\")[0];\n\n        // write the bytes of the binary string to an ArrayBuffer\n        arrayBuffer = new ArrayBuffer(byteString.length);\n        intArray = new Uint8Array(arrayBuffer);\n        qq.each(byteString, function(idx, character) {\n            intArray[idx] = character.charCodeAt(0);\n        });\n\n        return createBlob(arrayBuffer, mimeString);\n    };\n\n    qq.log = function(message, level) {\n        if (window.console) {\n            if (!level || level === \"info\") {\n                window.console.log(message);\n            }\n            else\n            {\n                if (window.console[level]) {\n                    window.console[level](message);\n                }\n                else {\n                    window.console.log(\"<\" + level + \"> \" + message);\n                }\n            }\n        }\n    };\n\n    qq.isObject = function(variable) {\n        return variable && !variable.nodeType && Object.prototype.toString.call(variable) === \"[object Object]\";\n    };\n\n    qq.isFunction = function(variable) {\n        return typeof (variable) === \"function\";\n    };\n\n    /**\n     * Check the type of a value.  Is it an \"array\"?\n     *\n     * @param value value to test.\n     * @returns true if the value is an array or associated with an `ArrayBuffer`\n     */\n    qq.isArray = function(value) {\n        return Object.prototype.toString.call(value) === \"[object Array]\" ||\n            (value && window.ArrayBuffer && value.buffer && value.buffer.constructor === ArrayBuffer);\n    };\n\n    // Looks for an object on a `DataTransfer` object that is associated with drop events when utilizing the Filesystem API.\n    qq.isItemList = function(maybeItemList) {\n        return Object.prototype.toString.call(maybeItemList) === \"[object DataTransferItemList]\";\n    };\n\n    // Looks for an object on a `NodeList` or an `HTMLCollection`|`HTMLFormElement`|`HTMLSelectElement`\n    // object that is associated with collections of Nodes.\n    qq.isNodeList = function(maybeNodeList) {\n        return Object.prototype.toString.call(maybeNodeList) === \"[object NodeList]\" ||\n            // If `HTMLCollection` is the actual type of the object, we must determine this\n            // by checking for expected properties/methods on the object\n            (maybeNodeList.item && maybeNodeList.namedItem);\n    };\n\n    qq.isString = function(maybeString) {\n        return Object.prototype.toString.call(maybeString) === \"[object String]\";\n    };\n\n    qq.trimStr = function(string) {\n        if (String.prototype.trim) {\n            return string.trim();\n        }\n\n        return string.replace(/^\\s+|\\s+$/g, \"\");\n    };\n\n    /**\n     * @param str String to format.\n     * @returns {string} A string, swapping argument values with the associated occurrence of {} in the passed string.\n     */\n    qq.format = function(str) {\n\n        var args =  Array.prototype.slice.call(arguments, 1),\n            newStr = str,\n            nextIdxToReplace = newStr.indexOf(\"{}\");\n\n        qq.each(args, function(idx, val) {\n            var strBefore = newStr.substring(0, nextIdxToReplace),\n                strAfter = newStr.substring(nextIdxToReplace + 2);\n\n            newStr = strBefore + val + strAfter;\n            nextIdxToReplace = newStr.indexOf(\"{}\", nextIdxToReplace + val.length);\n\n            // End the loop if we have run out of tokens (when the arguments exceed the # of tokens)\n            if (nextIdxToReplace < 0) {\n                return false;\n            }\n        });\n\n        return newStr;\n    };\n\n    qq.isFile = function(maybeFile) {\n        return window.File && Object.prototype.toString.call(maybeFile) === \"[object File]\";\n    };\n\n    qq.isFileList = function(maybeFileList) {\n        return window.FileList && Object.prototype.toString.call(maybeFileList) === \"[object FileList]\";\n    };\n\n    qq.isFileOrInput = function(maybeFileOrInput) {\n        return qq.isFile(maybeFileOrInput) || qq.isInput(maybeFileOrInput);\n    };\n\n    qq.isInput = function(maybeInput, notFile) {\n        var evaluateType = function(type) {\n            var normalizedType = type.toLowerCase();\n\n            if (notFile) {\n                return normalizedType !== \"file\";\n            }\n\n            return normalizedType === \"file\";\n        };\n\n        if (window.HTMLInputElement) {\n            if (Object.prototype.toString.call(maybeInput) === \"[object HTMLInputElement]\") {\n                if (maybeInput.type && evaluateType(maybeInput.type)) {\n                    return true;\n                }\n            }\n        }\n        if (maybeInput.tagName) {\n            if (maybeInput.tagName.toLowerCase() === \"input\") {\n                if (maybeInput.type && evaluateType(maybeInput.type)) {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    };\n\n    qq.isBlob = function(maybeBlob) {\n        if (window.Blob && Object.prototype.toString.call(maybeBlob) === \"[object Blob]\") {\n            return true;\n        }\n    };\n\n    qq.isXhrUploadSupported = function() {\n        var input = document.createElement(\"input\");\n        input.type = \"file\";\n\n        return (\n            input.multiple !== undefined &&\n                typeof File !== \"undefined\" &&\n                typeof FormData !== \"undefined\" &&\n                typeof (qq.createXhrInstance()).upload !== \"undefined\");\n    };\n\n    // Fall back to ActiveX is native XHR is disabled (possible in any version of IE).\n    qq.createXhrInstance = function() {\n        if (window.XMLHttpRequest) {\n            return new XMLHttpRequest();\n        }\n\n        try {\n            return new ActiveXObject(\"MSXML2.XMLHTTP.3.0\");\n        }\n        catch (error) {\n            qq.log(\"Neither XHR or ActiveX are supported!\", \"error\");\n            return null;\n        }\n    };\n\n    qq.isFolderDropSupported = function(dataTransfer) {\n        return dataTransfer.items &&\n            dataTransfer.items.length > 0 &&\n            dataTransfer.items[0].webkitGetAsEntry;\n    };\n\n    qq.isFileChunkingSupported = function() {\n        return !qq.androidStock() && //Android's stock browser cannot upload Blobs correctly\n            qq.isXhrUploadSupported() &&\n            (File.prototype.slice !== undefined || File.prototype.webkitSlice !== undefined || File.prototype.mozSlice !== undefined);\n    };\n\n    qq.sliceBlob = function(fileOrBlob, start, end) {\n        var slicer = fileOrBlob.slice || fileOrBlob.mozSlice || fileOrBlob.webkitSlice;\n\n        return slicer.call(fileOrBlob, start, end);\n    };\n\n    qq.arrayBufferToHex = function(buffer) {\n        var bytesAsHex = \"\",\n            bytes = new Uint8Array(buffer);\n\n        qq.each(bytes, function(idx, byt) {\n            var byteAsHexStr = byt.toString(16);\n\n            if (byteAsHexStr.length < 2) {\n                byteAsHexStr = \"0\" + byteAsHexStr;\n            }\n\n            bytesAsHex += byteAsHexStr;\n        });\n\n        return bytesAsHex;\n    };\n\n    qq.readBlobToHex = function(blob, startOffset, length) {\n        var initialBlob = qq.sliceBlob(blob, startOffset, startOffset + length),\n            fileReader = new FileReader(),\n            promise = new qq.Promise();\n\n        fileReader.onload = function() {\n            promise.success(qq.arrayBufferToHex(fileReader.result));\n        };\n\n        fileReader.onerror = promise.failure;\n\n        fileReader.readAsArrayBuffer(initialBlob);\n\n        return promise;\n    };\n\n    qq.extend = function(first, second, extendNested) {\n        qq.each(second, function(prop, val) {\n            if (extendNested && qq.isObject(val)) {\n                if (first[prop] === undefined) {\n                    first[prop] = {};\n                }\n                qq.extend(first[prop], val, true);\n            }\n            else {\n                first[prop] = val;\n            }\n        });\n\n        return first;\n    };\n\n    /**\n     * Allow properties in one object to override properties in another,\n     * keeping track of the original values from the target object.\n     *\n     * Note that the pre-overriden properties to be overriden by the source will be passed into the `sourceFn` when it is invoked.\n     *\n     * @param target Update properties in this object from some source\n     * @param sourceFn A function that, when invoked, will return properties that will replace properties with the same name in the target.\n     * @returns {object} The target object\n     */\n    qq.override = function(target, sourceFn) {\n        var super_ = {},\n            source = sourceFn(super_);\n\n        qq.each(source, function(srcPropName, srcPropVal) {\n            if (target[srcPropName] !== undefined) {\n                super_[srcPropName] = target[srcPropName];\n            }\n\n            target[srcPropName] = srcPropVal;\n        });\n\n        return target;\n    };\n\n    /**\n     * Searches for a given element (elt) in the array, returns -1 if it is not present.\n     */\n    qq.indexOf = function(arr, elt, from) {\n        if (arr.indexOf) {\n            return arr.indexOf(elt, from);\n        }\n\n        from = from || 0;\n        var len = arr.length;\n\n        if (from < 0) {\n            from += len;\n        }\n\n        for (; from < len; from += 1) {\n            if (arr.hasOwnProperty(from) && arr[from] === elt) {\n                return from;\n            }\n        }\n        return -1;\n    };\n\n    //this is a version 4 UUID\n    qq.getUniqueId = function() {\n        return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n            /*jslint eqeq: true, bitwise: true*/\n            var r = Math.random() * 16 | 0, v = c == \"x\" ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    };\n\n    //\n    // Browsers and platforms detection\n    qq.ie = function() {\n        return navigator.userAgent.indexOf(\"MSIE\") !== -1 ||\n            navigator.userAgent.indexOf(\"Trident\") !== -1;\n    };\n\n    qq.ie7 = function() {\n        return navigator.userAgent.indexOf(\"MSIE 7\") !== -1;\n    };\n\n    qq.ie8 = function() {\n        return navigator.userAgent.indexOf(\"MSIE 8\") !== -1;\n    };\n\n    qq.ie10 = function() {\n        return navigator.userAgent.indexOf(\"MSIE 10\") !== -1;\n    };\n\n    qq.ie11 = function() {\n        return qq.ie() && navigator.userAgent.indexOf(\"rv:11\") !== -1;\n    };\n\n    qq.edge = function() {\n        return navigator.userAgent.indexOf(\"Edge\") >= 0;\n    };\n\n    qq.safari = function() {\n        return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Apple\") !== -1;\n    };\n\n    qq.chrome = function() {\n        return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Google\") !== -1;\n    };\n\n    qq.opera = function() {\n        return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Opera\") !== -1;\n    };\n\n    qq.firefox = function() {\n        return (!qq.edge() && !qq.ie11() && navigator.userAgent.indexOf(\"Mozilla\") !== -1 && navigator.vendor !== undefined && navigator.vendor === \"\");\n    };\n\n    qq.windows = function() {\n        return navigator.platform === \"Win32\";\n    };\n\n    qq.android = function() {\n        return navigator.userAgent.toLowerCase().indexOf(\"android\") !== -1;\n    };\n\n    // We need to identify the Android stock browser via the UA string to work around various bugs in this browser,\n    // such as the one that prevents a `Blob` from being uploaded.\n    qq.androidStock = function() {\n        return qq.android() && navigator.userAgent.toLowerCase().indexOf(\"chrome\") < 0;\n    };\n\n    qq.ios6 = function() {\n        return qq.ios() && navigator.userAgent.indexOf(\" OS 6_\") !== -1;\n    };\n\n    qq.ios7 = function() {\n        return qq.ios() && navigator.userAgent.indexOf(\" OS 7_\") !== -1;\n    };\n\n    qq.ios8 = function() {\n        return qq.ios() && navigator.userAgent.indexOf(\" OS 8_\") !== -1;\n    };\n\n    // iOS 8.0.0\n    qq.ios800 = function() {\n        return qq.ios() && navigator.userAgent.indexOf(\" OS 8_0 \") !== -1;\n    };\n\n    qq.ios = function() {\n        /*jshint -W014 */\n        return navigator.userAgent.indexOf(\"iPad\") !== -1\n            || navigator.userAgent.indexOf(\"iPod\") !== -1\n            || navigator.userAgent.indexOf(\"iPhone\") !== -1;\n    };\n\n    qq.iosChrome = function() {\n        return qq.ios() && navigator.userAgent.indexOf(\"CriOS\") !== -1;\n    };\n\n    qq.iosSafari = function() {\n        return qq.ios() && !qq.iosChrome() && navigator.userAgent.indexOf(\"Safari\") !== -1;\n    };\n\n    qq.iosSafariWebView = function() {\n        return qq.ios() && !qq.iosChrome() && !qq.iosSafari();\n    };\n\n    //\n    // Events\n\n    qq.preventDefault = function(e) {\n        if (e.preventDefault) {\n            e.preventDefault();\n        } else {\n            e.returnValue = false;\n        }\n    };\n\n    /**\n     * Creates and returns element from html string\n     * Uses innerHTML to create an element\n     */\n    qq.toElement = (function() {\n        var div = document.createElement(\"div\");\n        return function(html) {\n            div.innerHTML = html;\n            var element = div.firstChild;\n            div.removeChild(element);\n            return element;\n        };\n    }());\n\n    //key and value are passed to callback for each entry in the iterable item\n    qq.each = function(iterableItem, callback) {\n        var keyOrIndex, retVal;\n\n        if (iterableItem) {\n            // Iterate through [`Storage`](http://www.w3.org/TR/webstorage/#the-storage-interface) items\n            if (window.Storage && iterableItem.constructor === window.Storage) {\n                for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                    retVal = callback(iterableItem.key(keyOrIndex), iterableItem.getItem(iterableItem.key(keyOrIndex)));\n                    if (retVal === false) {\n                        break;\n                    }\n                }\n            }\n            // `DataTransferItemList` & `NodeList` objects are array-like and should be treated as arrays\n            // when iterating over items inside the object.\n            else if (qq.isArray(iterableItem) || qq.isItemList(iterableItem) || qq.isNodeList(iterableItem)) {\n                for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                    retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                    if (retVal === false) {\n                        break;\n                    }\n                }\n            }\n            else if (qq.isString(iterableItem)) {\n                for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                    retVal = callback(keyOrIndex, iterableItem.charAt(keyOrIndex));\n                    if (retVal === false) {\n                        break;\n                    }\n                }\n            }\n            else {\n                for (keyOrIndex in iterableItem) {\n                    if (Object.prototype.hasOwnProperty.call(iterableItem, keyOrIndex)) {\n                        retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    };\n\n    //include any args that should be passed to the new function after the context arg\n    qq.bind = function(oldFunc, context) {\n        if (qq.isFunction(oldFunc)) {\n            var args =  Array.prototype.slice.call(arguments, 2);\n\n            return function() {\n                var newArgs = qq.extend([], args);\n                if (arguments.length) {\n                    newArgs = newArgs.concat(Array.prototype.slice.call(arguments));\n                }\n                return oldFunc.apply(context, newArgs);\n            };\n        }\n\n        throw new Error(\"first parameter must be a function!\");\n    };\n\n    /**\n     * obj2url() takes a json-object as argument and generates\n     * a querystring. pretty much like jQuery.param()\n     *\n     * how to use:\n     *\n     *    `qq.obj2url({a:'b',c:'d'},'http://any.url/upload?otherParam=value');`\n     *\n     * will result in:\n     *\n     *    `http://any.url/upload?otherParam=value&a=b&c=d`\n     *\n     * @param  Object JSON-Object\n     * @param  String current querystring-part\n     * @return String encoded querystring\n     */\n    qq.obj2url = function(obj, temp, prefixDone) {\n        /*jshint laxbreak: true*/\n        var uristrings = [],\n            prefix = \"&\",\n            add = function(nextObj, i) {\n                var nextTemp = temp\n                    ? (/\\[\\]$/.test(temp)) // prevent double-encoding\n                    ? temp\n                    : temp + \"[\" + i + \"]\"\n                    : i;\n                if ((nextTemp !== \"undefined\") && (i !== \"undefined\")) {\n                    uristrings.push(\n                        (typeof nextObj === \"object\")\n                            ? qq.obj2url(nextObj, nextTemp, true)\n                            : (Object.prototype.toString.call(nextObj) === \"[object Function]\")\n                            ? encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj())\n                            : encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj)\n                    );\n                }\n            };\n\n        if (!prefixDone && temp) {\n            prefix = (/\\?/.test(temp)) ? (/\\?$/.test(temp)) ? \"\" : \"&\" : \"?\";\n            uristrings.push(temp);\n            uristrings.push(qq.obj2url(obj));\n        } else if ((Object.prototype.toString.call(obj) === \"[object Array]\") && (typeof obj !== \"undefined\")) {\n            qq.each(obj, function(idx, val) {\n                add(val, idx);\n            });\n        } else if ((typeof obj !== \"undefined\") && (obj !== null) && (typeof obj === \"object\")) {\n            qq.each(obj, function(prop, val) {\n                add(val, prop);\n            });\n        } else {\n            uristrings.push(encodeURIComponent(temp) + \"=\" + encodeURIComponent(obj));\n        }\n\n        if (temp) {\n            return uristrings.join(prefix);\n        } else {\n            return uristrings.join(prefix)\n                .replace(/^&/, \"\")\n                .replace(/%20/g, \"+\");\n        }\n    };\n\n    qq.obj2FormData = function(obj, formData, arrayKeyName) {\n        if (!formData) {\n            formData = new FormData();\n        }\n\n        qq.each(obj, function(key, val) {\n            key = arrayKeyName ? arrayKeyName + \"[\" + key + \"]\" : key;\n\n            if (qq.isObject(val)) {\n                qq.obj2FormData(val, formData, key);\n            }\n            else if (qq.isFunction(val)) {\n                formData.append(key, val());\n            }\n            else {\n                formData.append(key, val);\n            }\n        });\n\n        return formData;\n    };\n\n    qq.obj2Inputs = function(obj, form) {\n        var input;\n\n        if (!form) {\n            form = document.createElement(\"form\");\n        }\n\n        qq.obj2FormData(obj, {\n            append: function(key, val) {\n                input = document.createElement(\"input\");\n                input.setAttribute(\"name\", key);\n                input.setAttribute(\"value\", val);\n                form.appendChild(input);\n            }\n        });\n\n        return form;\n    };\n\n    /**\n     * Not recommended for use outside of Fine Uploader since this falls back to an unchecked eval if JSON.parse is not\n     * implemented.  For a more secure JSON.parse polyfill, use Douglas Crockford's json2.js.\n     */\n    qq.parseJson = function(json) {\n        /*jshint evil: true*/\n        if (window.JSON && qq.isFunction(JSON.parse)) {\n            return JSON.parse(json);\n        } else {\n            return eval(\"(\" + json + \")\");\n        }\n    };\n\n    /**\n     * Retrieve the extension of a file, if it exists.\n     *\n     * @param filename\n     * @returns {string || undefined}\n     */\n    qq.getExtension = function(filename) {\n        var extIdx = filename.lastIndexOf(\".\") + 1;\n\n        if (extIdx > 0) {\n            return filename.substr(extIdx, filename.length - extIdx);\n        }\n    };\n\n    qq.getFilename = function(blobOrFileInput) {\n        /*jslint regexp: true*/\n\n        if (qq.isInput(blobOrFileInput)) {\n            // get input value and remove path to normalize\n            return blobOrFileInput.value.replace(/.*(\\/|\\\\)/, \"\");\n        }\n        else if (qq.isFile(blobOrFileInput)) {\n            if (blobOrFileInput.fileName !== null && blobOrFileInput.fileName !== undefined) {\n                return blobOrFileInput.fileName;\n            }\n        }\n\n        return blobOrFileInput.name;\n    };\n\n    /**\n     * A generic module which supports object disposing in dispose() method.\n     * */\n    qq.DisposeSupport = function() {\n        var disposers = [];\n\n        return {\n            /** Run all registered disposers */\n            dispose: function() {\n                var disposer;\n                do {\n                    disposer = disposers.shift();\n                    if (disposer) {\n                        disposer();\n                    }\n                }\n                while (disposer);\n            },\n\n            /** Attach event handler and register de-attacher as a disposer */\n            attach: function() {\n                var args = arguments;\n                /*jslint undef:true*/\n                this.addDisposer(qq(args[0]).attach.apply(this, Array.prototype.slice.call(arguments, 1)));\n            },\n\n            /** Add disposer to the collection */\n            addDisposer: function(disposeFunction) {\n                disposers.push(disposeFunction);\n            }\n        };\n    };\n}());\n","/* globals define, module, global, qq */\n(function() {\n    \"use strict\";\n    if (typeof define === \"function\" && define.amd) {\n        define(function() {\n            return qq;\n        });\n    }\n    else if (typeof module !== \"undefined\" && module.exports) {\n        module.exports = qq;\n    }\n    else {\n        global.qq = qq;\n    }\n}());\n","/*global qq */\nqq.version = \"5.16.2\";\n","/* globals qq */\nqq.supportedFeatures = (function() {\n    \"use strict\";\n\n    var supportsUploading,\n        supportsUploadingBlobs,\n        supportsFileDrop,\n        supportsAjaxFileUploading,\n        supportsFolderDrop,\n        supportsChunking,\n        supportsResume,\n        supportsUploadViaPaste,\n        supportsUploadCors,\n        supportsDeleteFileXdr,\n        supportsDeleteFileCorsXhr,\n        supportsDeleteFileCors,\n        supportsFolderSelection,\n        supportsImagePreviews,\n        supportsUploadProgress;\n\n    function testSupportsFileInputElement() {\n        var supported = true,\n            tempInput;\n\n        try {\n            tempInput = document.createElement(\"input\");\n            tempInput.type = \"file\";\n            qq(tempInput).hide();\n\n            if (tempInput.disabled) {\n                supported = false;\n            }\n        }\n        catch (ex) {\n            supported = false;\n        }\n\n        return supported;\n    }\n\n    //only way to test for complete Clipboard API support at this time\n    function isChrome14OrHigher() {\n        return (qq.chrome() || qq.opera()) &&\n            navigator.userAgent.match(/Chrome\\/[1][4-9]|Chrome\\/[2-9][0-9]/) !== undefined;\n    }\n\n    //Ensure we can send cross-origin `XMLHttpRequest`s\n    function isCrossOriginXhrSupported() {\n        if (window.XMLHttpRequest) {\n            var xhr = qq.createXhrInstance();\n\n            //Commonly accepted test for XHR CORS support.\n            return xhr.withCredentials !== undefined;\n        }\n\n        return false;\n    }\n\n    //Test for (terrible) cross-origin ajax transport fallback for IE9 and IE8\n    function isXdrSupported() {\n        return window.XDomainRequest !== undefined;\n    }\n\n    // CORS Ajax requests are supported if it is either possible to send credentialed `XMLHttpRequest`s,\n    // or if `XDomainRequest` is an available alternative.\n    function isCrossOriginAjaxSupported() {\n        if (isCrossOriginXhrSupported()) {\n            return true;\n        }\n\n        return isXdrSupported();\n    }\n\n    function isFolderSelectionSupported() {\n        // We know that folder selection is only supported in Chrome via this proprietary attribute for now\n        return document.createElement(\"input\").webkitdirectory !== undefined;\n    }\n\n    function isLocalStorageSupported() {\n        try {\n            return !!window.localStorage &&\n                // unpatched versions of IE10/11 have buggy impls of localStorage where setItem is a string\n                qq.isFunction(window.localStorage.setItem);\n        }\n        catch (error) {\n            // probably caught a security exception, so no localStorage for you\n            return false;\n        }\n    }\n\n    function isDragAndDropSupported() {\n        var span = document.createElement(\"span\");\n\n        return (\"draggable\" in span || (\"ondragstart\" in span && \"ondrop\" in span)) &&\n            !qq.android() && !qq.ios();\n    }\n\n    supportsUploading = testSupportsFileInputElement();\n\n    supportsAjaxFileUploading = supportsUploading && qq.isXhrUploadSupported();\n\n    supportsUploadingBlobs = supportsAjaxFileUploading && !qq.androidStock();\n\n    supportsFileDrop = supportsAjaxFileUploading && isDragAndDropSupported();\n\n    // adapted from https://stackoverflow.com/a/23278460/486979\n    supportsFolderDrop = supportsFileDrop && (function() {\n        var input = document.createElement(\"input\");\n\n        input.type = \"file\";\n        return !!(\"webkitdirectory\" in (input || document.querySelectorAll(\"input[type=file]\")[0]));\n    }());\n\n    supportsChunking = supportsAjaxFileUploading && qq.isFileChunkingSupported();\n\n    supportsResume = supportsAjaxFileUploading && supportsChunking && isLocalStorageSupported();\n\n    supportsUploadViaPaste = supportsAjaxFileUploading && isChrome14OrHigher();\n\n    supportsUploadCors = supportsUploading && (window.postMessage !== undefined || supportsAjaxFileUploading);\n\n    supportsDeleteFileCorsXhr = isCrossOriginXhrSupported();\n\n    supportsDeleteFileXdr = isXdrSupported();\n\n    supportsDeleteFileCors = isCrossOriginAjaxSupported();\n\n    supportsFolderSelection = isFolderSelectionSupported();\n\n    supportsImagePreviews = supportsAjaxFileUploading && window.FileReader !== undefined;\n\n    supportsUploadProgress = (function() {\n        if (supportsAjaxFileUploading) {\n            return !qq.androidStock() && !qq.iosChrome();\n        }\n        return false;\n    }());\n\n    return {\n        ajaxUploading: supportsAjaxFileUploading,\n        blobUploading: supportsUploadingBlobs,\n        canDetermineSize: supportsAjaxFileUploading,\n        chunking: supportsChunking,\n        deleteFileCors: supportsDeleteFileCors,\n        deleteFileCorsXdr: supportsDeleteFileXdr, //NOTE: will also return true in IE10, where XDR is also supported\n        deleteFileCorsXhr: supportsDeleteFileCorsXhr,\n        dialogElement: !!window.HTMLDialogElement,\n        fileDrop: supportsFileDrop,\n        folderDrop: supportsFolderDrop,\n        folderSelection: supportsFolderSelection,\n        imagePreviews: supportsImagePreviews,\n        imageValidation: supportsImagePreviews,\n        itemSizeValidation: supportsAjaxFileUploading,\n        pause: supportsChunking,\n        progressBar: supportsUploadProgress,\n        resume: supportsResume,\n        scaling: supportsImagePreviews && supportsUploadingBlobs,\n        tiffPreviews: qq.safari(), // Not the best solution, but simple and probably accurate enough (for now)\n        unlimitedScaledImageSize: !qq.ios(), // false simply indicates that there is some known limit\n        uploading: supportsUploading,\n        uploadCors: supportsUploadCors,\n        uploadCustomHeaders: supportsAjaxFileUploading,\n        uploadNonMultipart: supportsAjaxFileUploading,\n        uploadViaPaste: supportsUploadViaPaste\n    };\n\n}());\n","/*globals qq*/\n\n// Is the passed object a promise instance?\nqq.isGenericPromise = function(maybePromise) {\n    \"use strict\";\n    return !!(maybePromise && maybePromise.then && qq.isFunction(maybePromise.then));\n};\n\nqq.Promise = function() {\n    \"use strict\";\n\n    var successArgs, failureArgs,\n        successCallbacks = [],\n        failureCallbacks = [],\n        doneCallbacks = [],\n        state = 0;\n\n    qq.extend(this, {\n        then: function(onSuccess, onFailure) {\n            if (state === 0) {\n                if (onSuccess) {\n                    successCallbacks.push(onSuccess);\n                }\n                if (onFailure) {\n                    failureCallbacks.push(onFailure);\n                }\n            }\n            else if (state === -1) {\n                onFailure && onFailure.apply(null, failureArgs);\n            }\n            else if (onSuccess) {\n                onSuccess.apply(null, successArgs);\n            }\n\n            return this;\n        },\n\n        done: function(callback) {\n            if (state === 0) {\n                doneCallbacks.push(callback);\n            }\n            else {\n                callback.apply(null, failureArgs === undefined ? successArgs : failureArgs);\n            }\n\n            return this;\n        },\n\n        success: function() {\n            state = 1;\n            successArgs = arguments;\n\n            if (successCallbacks.length) {\n                qq.each(successCallbacks, function(idx, callback) {\n                    callback.apply(null, successArgs);\n                });\n            }\n\n            if (doneCallbacks.length) {\n                qq.each(doneCallbacks, function(idx, callback) {\n                    callback.apply(null, successArgs);\n                });\n            }\n\n            return this;\n        },\n\n        failure: function() {\n            state = -1;\n            failureArgs = arguments;\n\n            if (failureCallbacks.length) {\n                qq.each(failureCallbacks, function(idx, callback) {\n                    callback.apply(null, failureArgs);\n                });\n            }\n\n            if (doneCallbacks.length) {\n                qq.each(doneCallbacks, function(idx, callback) {\n                    callback.apply(null, failureArgs);\n                });\n            }\n\n            return this;\n        }\n    });\n};\n","/*globals qq, document, CustomEvent*/\nqq.DragAndDrop = function(o) {\n    \"use strict\";\n\n    var options,\n        HIDE_ZONES_EVENT_NAME = \"qq-hidezones\",\n        HIDE_BEFORE_ENTER_ATTR = \"qq-hide-dropzone\",\n        uploadDropZones = [],\n        droppedFiles = [],\n        disposeSupport = new qq.DisposeSupport();\n\n    options = {\n        dropZoneElements: [],\n        allowMultipleItems: true,\n        classes: {\n            dropActive: null\n        },\n        callbacks: new qq.DragAndDrop.callbacks()\n    };\n\n    qq.extend(options, o, true);\n\n    function uploadDroppedFiles(files, uploadDropZone) {\n        // We need to convert the `FileList` to an actual `Array` to avoid iteration issues\n        var filesAsArray = Array.prototype.slice.call(files);\n\n        options.callbacks.dropLog(\"Grabbed \" + files.length + \" dropped files.\");\n        uploadDropZone.dropDisabled(false);\n        options.callbacks.processingDroppedFilesComplete(filesAsArray, uploadDropZone.getElement());\n    }\n\n    function traverseFileTree(entry) {\n        var parseEntryPromise = new qq.Promise();\n\n        if (entry.isFile) {\n            entry.file(function(file) {\n                file.qqPath = extractDirectoryPath(entry);\n                droppedFiles.push(file);\n                parseEntryPromise.success();\n            },\n            function(fileError) {\n                options.callbacks.dropLog(\"Problem parsing '\" + entry.fullPath + \"'.  FileError code \" + fileError.code + \".\", \"error\");\n                parseEntryPromise.failure();\n            });\n        }\n        else if (entry.isDirectory) {\n            getFilesInDirectory(entry).then(\n                function allEntriesRead(entries) {\n                    var entriesLeft = entries.length;\n\n                    qq.each(entries, function(idx, entry) {\n                        traverseFileTree(entry).done(function() {\n                            entriesLeft -= 1;\n\n                            if (entriesLeft === 0) {\n                                parseEntryPromise.success();\n                            }\n                        });\n                    });\n\n                    if (!entries.length) {\n                        parseEntryPromise.success();\n                    }\n                },\n\n                function readFailure(fileError) {\n                    options.callbacks.dropLog(\"Problem parsing '\" + entry.fullPath + \"'.  FileError code \" + fileError.code + \".\", \"error\");\n                    parseEntryPromise.failure();\n                }\n            );\n        }\n\n        return parseEntryPromise;\n    }\n\n    function extractDirectoryPath(entry) {\n        var name = entry.name,\n            fullPath = entry.fullPath,\n            indexOfNameInFullPath = fullPath.lastIndexOf(name);\n\n        // remove file name from full path string\n        fullPath = fullPath.substr(0, indexOfNameInFullPath);\n\n        // remove leading slash in full path string\n        if (fullPath.charAt(0) === \"/\") {\n            fullPath = fullPath.substr(1);\n        }\n\n        return fullPath;\n    }\n\n    // Promissory.  Guaranteed to read all files in the root of the passed directory.\n    function getFilesInDirectory(entry, reader, accumEntries, existingPromise) {\n        var promise = existingPromise || new qq.Promise(),\n            dirReader = reader || entry.createReader();\n\n        dirReader.readEntries(\n            function readSuccess(entries) {\n                var newEntries = accumEntries ? accumEntries.concat(entries) : entries;\n\n                if (entries.length) {\n                    setTimeout(function() { // prevent stack overflow, however unlikely\n                        getFilesInDirectory(entry, dirReader, newEntries, promise);\n                    }, 0);\n                }\n                else {\n                    promise.success(newEntries);\n                }\n            },\n\n            promise.failure\n        );\n\n        return promise;\n    }\n\n    function handleDataTransfer(dataTransfer, uploadDropZone) {\n        var pendingFolderPromises = [],\n            handleDataTransferPromise = new qq.Promise();\n\n        options.callbacks.processingDroppedFiles();\n        uploadDropZone.dropDisabled(true);\n\n        if (dataTransfer.files.length > 1 && !options.allowMultipleItems) {\n            options.callbacks.processingDroppedFilesComplete([]);\n            options.callbacks.dropError(\"tooManyFilesError\", \"\");\n            uploadDropZone.dropDisabled(false);\n            handleDataTransferPromise.failure();\n        }\n        else {\n            droppedFiles = [];\n\n            if (qq.isFolderDropSupported(dataTransfer)) {\n                qq.each(dataTransfer.items, function(idx, item) {\n                    var entry = item.webkitGetAsEntry();\n\n                    if (entry) {\n                        //due to a bug in Chrome's File System API impl - #149735\n                        if (entry.isFile) {\n                            droppedFiles.push(item.getAsFile());\n                        }\n\n                        else {\n                            pendingFolderPromises.push(traverseFileTree(entry).done(function() {\n                                pendingFolderPromises.pop();\n                                if (pendingFolderPromises.length === 0) {\n                                    handleDataTransferPromise.success();\n                                }\n                            }));\n                        }\n                    }\n                });\n            }\n            else {\n                droppedFiles = dataTransfer.files;\n            }\n\n            if (pendingFolderPromises.length === 0) {\n                handleDataTransferPromise.success();\n            }\n        }\n\n        return handleDataTransferPromise;\n    }\n\n    function setupDropzone(dropArea) {\n        var dropZone = new qq.UploadDropZone({\n            HIDE_ZONES_EVENT_NAME: HIDE_ZONES_EVENT_NAME,\n            element: dropArea,\n            onEnter: function(e) {\n                qq(dropArea).addClass(options.classes.dropActive);\n                e.stopPropagation();\n            },\n            onLeaveNotDescendants: function(e) {\n                qq(dropArea).removeClass(options.classes.dropActive);\n            },\n            onDrop: function(e) {\n                handleDataTransfer(e.dataTransfer, dropZone).then(\n                    function() {\n                        uploadDroppedFiles(droppedFiles, dropZone);\n                    },\n                    function() {\n                        options.callbacks.dropLog(\"Drop event DataTransfer parsing failed.  No files will be uploaded.\", \"error\");\n                    }\n                );\n            }\n        });\n\n        disposeSupport.addDisposer(function() {\n            dropZone.dispose();\n        });\n\n        qq(dropArea).hasAttribute(HIDE_BEFORE_ENTER_ATTR) && qq(dropArea).hide();\n\n        uploadDropZones.push(dropZone);\n\n        return dropZone;\n    }\n\n    function isFileDrag(dragEvent) {\n        var fileDrag;\n\n        qq.each(dragEvent.dataTransfer.types, function(key, val) {\n            if (val === \"Files\") {\n                fileDrag = true;\n                return false;\n            }\n        });\n\n        return fileDrag;\n    }\n\n    // Attempt to determine when the file has left the document.  It is not always possible to detect this\n    // in all cases, but it is generally possible in all browsers, with a few exceptions.\n    //\n    // Exceptions:\n    // * IE10+ & Safari: We can't detect a file leaving the document if the Explorer window housing the file\n    //                   overlays the browser window.\n    // * IE10+: If the file is dragged out of the window too quickly, IE does not set the expected values of the\n    //          event's X & Y properties.\n    function leavingDocumentOut(e) {\n        if (qq.safari()) {\n            return e.x < 0 || e.y < 0;\n        }\n\n        return e.x === 0 && e.y === 0;\n    }\n\n    function setupDragDrop() {\n        var dropZones = options.dropZoneElements,\n\n            maybeHideDropZones = function() {\n                setTimeout(function() {\n                    qq.each(dropZones, function(idx, dropZone) {\n                        qq(dropZone).hasAttribute(HIDE_BEFORE_ENTER_ATTR) && qq(dropZone).hide();\n                        qq(dropZone).removeClass(options.classes.dropActive);\n                    });\n                }, 10);\n            };\n\n        qq.each(dropZones, function(idx, dropZone) {\n            var uploadDropZone = setupDropzone(dropZone);\n\n            // IE <= 9 does not support the File API used for drag+drop uploads\n            if (dropZones.length && qq.supportedFeatures.fileDrop) {\n                disposeSupport.attach(document, \"dragenter\", function(e) {\n                    if (!uploadDropZone.dropDisabled() && isFileDrag(e)) {\n                        qq.each(dropZones, function(idx, dropZone) {\n                            // We can't apply styles to non-HTMLElements, since they lack the `style` property.\n                            // Also, if the drop zone isn't initially hidden, let's not mess with `style.display`.\n                            if (dropZone instanceof HTMLElement &&\n                                qq(dropZone).hasAttribute(HIDE_BEFORE_ENTER_ATTR)) {\n\n                                qq(dropZone).css({display: \"block\"});\n                            }\n                        });\n                    }\n                });\n            }\n        });\n\n        disposeSupport.attach(document, \"dragleave\", function(e) {\n            if (leavingDocumentOut(e)) {\n                maybeHideDropZones();\n            }\n        });\n\n        // Just in case we were not able to detect when a dragged file has left the document,\n        // hide all relevant drop zones the next time the mouse enters the document.\n        // Note that mouse events such as this one are not fired during drag operations.\n        disposeSupport.attach(qq(document).children()[0], \"mouseenter\", function(e) {\n            maybeHideDropZones();\n        });\n\n        disposeSupport.attach(document, \"drop\", function(e) {\n            if (isFileDrag(e)) {\n                e.preventDefault();\n                maybeHideDropZones();\n            }\n        });\n\n        disposeSupport.attach(document, HIDE_ZONES_EVENT_NAME, maybeHideDropZones);\n    }\n\n    setupDragDrop();\n\n    qq.extend(this, {\n        setupExtraDropzone: function(element) {\n            options.dropZoneElements.push(element);\n            setupDropzone(element);\n        },\n\n        removeDropzone: function(element) {\n            var i,\n                dzs = options.dropZoneElements;\n\n            for (i in dzs) {\n                if (dzs[i] === element) {\n                    return dzs.splice(i, 1);\n                }\n            }\n        },\n\n        dispose: function() {\n            disposeSupport.dispose();\n            qq.each(uploadDropZones, function(idx, dropZone) {\n                dropZone.dispose();\n            });\n        }\n    });\n\n    this._testing = {};\n    this._testing.extractDirectoryPath = extractDirectoryPath;\n};\n\nqq.DragAndDrop.callbacks = function() {\n    \"use strict\";\n\n    return {\n        processingDroppedFiles: function() {},\n        processingDroppedFilesComplete: function(files, targetEl) {},\n        dropError: function(code, errorSpecifics) {\n            qq.log(\"Drag & drop error code '\" + code + \" with these specifics: '\" + errorSpecifics + \"'\", \"error\");\n        },\n        dropLog: function(message, level) {\n            qq.log(message, level);\n        }\n    };\n};\n\nqq.UploadDropZone = function(o) {\n    \"use strict\";\n\n    var disposeSupport = new qq.DisposeSupport(),\n        options, element, preventDrop, dropOutsideDisabled;\n\n    options = {\n        element: null,\n        onEnter: function(e) {},\n        onLeave: function(e) {},\n        // is not fired when leaving element by hovering descendants\n        onLeaveNotDescendants: function(e) {},\n        onDrop: function(e) {}\n    };\n\n    qq.extend(options, o);\n    element = options.element;\n\n    function dragoverShouldBeCanceled() {\n        return qq.safari() || (qq.firefox() && qq.windows());\n    }\n\n    function disableDropOutside(e) {\n        // run only once for all instances\n        if (!dropOutsideDisabled) {\n\n            // for these cases we need to catch onDrop to reset dropArea\n            if (dragoverShouldBeCanceled) {\n                disposeSupport.attach(document, \"dragover\", function(e) {\n                    e.preventDefault();\n                });\n            } else {\n                disposeSupport.attach(document, \"dragover\", function(e) {\n                    if (e.dataTransfer) {\n                        e.dataTransfer.dropEffect = \"none\";\n                        e.preventDefault();\n                    }\n                });\n            }\n\n            dropOutsideDisabled = true;\n        }\n    }\n\n    function isValidFileDrag(e) {\n        // e.dataTransfer currently causing IE errors\n        // IE9 does NOT support file API, so drag-and-drop is not possible\n        if (!qq.supportedFeatures.fileDrop) {\n            return false;\n        }\n\n        var effectTest, dt = e.dataTransfer,\n        // do not check dt.types.contains in webkit, because it crashes safari 4\n        isSafari = qq.safari();\n\n        // dt.effectAllowed is none in Safari 5\n\n        // dt.effectAllowed crashes IE 11 & 10 when files have been dragged from\n        // the filesystem\n        effectTest = qq.ie() && qq.supportedFeatures.fileDrop ? true : dt.effectAllowed !== \"none\";\n        return dt && effectTest &&\n                (\n                    (dt.files && dt.files.length) ||                                     // Valid for drop events with files\n                    (!isSafari && dt.types.contains && dt.types.contains(\"Files\")) ||  // Valid in Chrome/Firefox\n                    (dt.types.includes && dt.types.includes(\"Files\"))               // Valid in IE\n                );\n    }\n\n    function isOrSetDropDisabled(isDisabled) {\n        if (isDisabled !== undefined) {\n            preventDrop = isDisabled;\n        }\n        return preventDrop;\n    }\n\n    function triggerHidezonesEvent() {\n        var hideZonesEvent;\n\n        function triggerUsingOldApi() {\n            hideZonesEvent = document.createEvent(\"Event\");\n            hideZonesEvent.initEvent(options.HIDE_ZONES_EVENT_NAME, true, true);\n        }\n\n        if (window.CustomEvent) {\n            try {\n                hideZonesEvent = new CustomEvent(options.HIDE_ZONES_EVENT_NAME);\n            }\n            catch (err) {\n                triggerUsingOldApi();\n            }\n        }\n        else {\n            triggerUsingOldApi();\n        }\n\n        document.dispatchEvent(hideZonesEvent);\n    }\n\n    function attachEvents() {\n        disposeSupport.attach(element, \"dragover\", function(e) {\n            if (!isValidFileDrag(e)) {\n                return;\n            }\n\n            // dt.effectAllowed crashes IE 11 & 10 when files have been dragged from\n            // the filesystem\n            var effect = qq.ie() && qq.supportedFeatures.fileDrop ? null : e.dataTransfer.effectAllowed;\n            if (effect === \"move\" || effect === \"linkMove\") {\n                e.dataTransfer.dropEffect = \"move\"; // for FF (only move allowed)\n            } else {\n                e.dataTransfer.dropEffect = \"copy\"; // for Chrome\n            }\n\n            e.stopPropagation();\n            e.preventDefault();\n        });\n\n        disposeSupport.attach(element, \"dragenter\", function(e) {\n            if (!isOrSetDropDisabled()) {\n                if (!isValidFileDrag(e)) {\n                    return;\n                }\n                options.onEnter(e);\n            }\n        });\n\n        disposeSupport.attach(element, \"dragleave\", function(e) {\n            if (!isValidFileDrag(e)) {\n                return;\n            }\n\n            options.onLeave(e);\n\n            var relatedTarget = document.elementFromPoint(e.clientX, e.clientY);\n            // do not fire when moving a mouse over a descendant\n            if (qq(this).contains(relatedTarget)) {\n                return;\n            }\n\n            options.onLeaveNotDescendants(e);\n        });\n\n        disposeSupport.attach(element, \"drop\", function(e) {\n            if (!isOrSetDropDisabled()) {\n                if (!isValidFileDrag(e)) {\n                    return;\n                }\n\n                e.preventDefault();\n                e.stopPropagation();\n                options.onDrop(e);\n\n                triggerHidezonesEvent();\n            }\n        });\n    }\n\n    disableDropOutside();\n    attachEvents();\n\n    qq.extend(this, {\n        dropDisabled: function(isDisabled) {\n            return isOrSetDropDisabled(isDisabled);\n        },\n\n        dispose: function() {\n            disposeSupport.dispose();\n        },\n\n        getElement: function() {\n            return element;\n        }\n    });\n\n    this._testing = {};\n    this._testing.isValidFileDrag = isValidFileDrag;\n};\n"]},"metadata":{},"sourceType":"script"}